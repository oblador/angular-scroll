var duScrollDefaultEasing=function(t){return.5>t?Math.pow(2*t,2)/2:1-Math.pow(2*(1-t),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.requestAnimation","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollEasing",duScrollDefaultEasing),angular.module("duScroll.scrollHelpers",[]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing",function(t,e,n,r,o){var l=angular.element.prototype;this.$get=function(){return l};var i=function(t){return"undefined"!=typeof HTMLDocument&&t instanceof HTMLDocument||t.nodeType&&t.nodeType===t.DOCUMENT_NODE},c=function(t){return"undefined"!=typeof HTMLElement&&t instanceof HTMLElement||t.nodeType&&t.nodeType===t.ELEMENT_NODE},u=function(t){return c(t)||i(t)?t:t[0]};l.scrollTo=function(e,n,r){var o;if(angular.isElement(e)?o=this.scrollToElement:r&&(o=this.scrollToAnimated),o)return o.apply(this,arguments);var l=u(this);return i(l)?t.scrollTo(e,n):(l.scrollLeft=e,void(l.scrollTop=n))};var a,s;l.scrollToAnimated=function(t,l,i,c){i&&!c&&(c=o);var u=this.scrollLeft(),d=this.scrollTop(),f=Math.round(t-u),p=Math.round(l-d);if(f||p){var m=null;a&&(n(a),s.reject());var g=this;s=e.defer();var v=function(t){null===m&&(m=t);var e=t-m,n=e>=i?1:c(e/i);g.scrollTo(u+Math.ceil(f*n),d+Math.ceil(p*n)),1>n?a=r(v):(a=null,s.resolve())};return a=r(v),s.promise}},l.scrollToElement=function(t,e,n,r){var o=u(this),l=this.scrollTop()+u(t).getBoundingClientRect().top-e;return c(o)&&(l-=o.getBoundingClientRect().top),this.scrollTo(0,l,n,r)};var d={scrollLeft:function(e,n,r){if(angular.isNumber(e))return this.scrollTo(e,this.scrollTop(),n,r);var o=u(this);return i(o)?t.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:o.scrollLeft},scrollTop:function(e,n,r){if(angular.isNumber(e))return this.scrollTo(this.scrollTop(),e,n,r);var o=u(this);return i(o)?t.scrollY||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop}},f=function(t,e){return function(n,r){return r?e.apply(this,arguments):t.apply(this,arguments)}};for(var p in d)l[p]=l[p]?f(l[p],d[p]):d[p]}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(t){var e=["webkit","moz","o","ms"];return function(n,r){if(t[n])return t[n];for(var o,l=n.substr(0,1).toUpperCase()+n.substr(1),i=0;i<e.length;i++)if(o=e[i]+l,t[o])return t[o];return r}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(t,e){var n=0,r=function(t){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),l=e(function(){t(r+o)},o);return n=r+o,l};return t("requestAnimationFrame",r)}]).factory("cancelAnimation",["polyfill","$timeout",function(t,e){var n=function(t){e.cancel(t)};return t("cancelAnimationFrame",n)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","scrollContainerAPI",function(t,e){var n=function(e){return function(){var n=e.container,r=n[0],o=0;r instanceof HTMLElement&&(o=r.getBoundingClientRect().top);var l,i,c,u,a,s;for(u=e.spies,i=e.currentlyActive,c=void 0,l=0;l<u.length;l++)a=u[l],s=a.getTargetPosition(),s&&s.top+a.offset-o<20&&-1*s.top+o<s.height&&(!c||c.top<s.top)&&(c={top:s.top,spy:a});c&&(c=c.spy),i!==c&&(i&&(i.$element.removeClass("active"),t.$broadcast("duScrollspy:becameInactive",i.$element)),c&&(c.$element.addClass("active"),t.$broadcast("duScrollspy:becameActive",c.$element)),e.currentlyActive=c)}},r={},o=function(t){var e=t.$id,o={spies:[]};return o.handler=n(o),r[e]=o,t.$on("$destroy",function(){l(t)}),e},l=function(t){var e=t.$id,n=r[e],o=n.container;o&&o.off("scroll",n.handler),delete r[e]},i=o(t),c=function(t){return r[t.$id]?r[t.$id]:t.$parent?c(t.$parent):r[i]},u=function(t){var e,n,o=t.$element.scope();if(o)return c(o);for(n in r)if(e=r[n],-1!==e.spies.indexOf(t))return e},a=function(t){var n=u(t);u(t).spies.push(t),n.container||(n.container=e.getContainer(t.$element.scope()),n.container.on("scroll",n.handler).triggerHandler("scroll"))},s=function(t){var e=u(t);t===e.currentlyActive&&(e.currentlyActive=null);var n=e.spies.indexOf(t);-1!==n&&e.spies.splice(n,1)};return{addSpy:a,removeSpy:s,createContext:o,destroyContext:l,getContextForScope:c}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(t){var e={},n=function(t,n){var r=t.$id;return e[r]=n,r},r=function(t){return e[t.$id]?t.$id:t.$parent?r(t.$parent):void 0},o=function(n){var o=r(n);return o?e[o]:t},l=function(t){var n=r(t);n&&delete e[n]};return{getContainerId:r,getContainer:o,setContainer:n,removeContainer:l}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","scrollContainerAPI",function(t,e){return{link:function(n,r,o){r.on("click",function(r){if(o.href&&-1!==o.href.indexOf("#")){var l=document.getElementById(o.href.replace(/.*(?=#[^\s]+$)/,"").substring(1));if(l&&l.getBoundingClientRect){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var i=o.offset?parseInt(o.offset,10):0,c=o.duration?parseInt(o.duration,10):t,u=e.getContainer(n);u.scrollToElement(angular.element(l),isNaN(i)?0:i,isNaN(c)?0:c)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(t){return{restrict:"A",scope:!0,compile:function(){return{pre:function(e){t.createContext(e)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(t){return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,n,r){r.$observe("duScrollContainer",function(r){angular.isString(r)&&(r=document.getElementById(r)),r=angular.isElement(r)?angular.element(r):n,t.setContainer(e,r),e.$on("$destroy",function(){t.removeContainer(e)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","$timeout",function(t,e){var n=function(t,e,n){angular.isElement(t)?this.target=t:angular.isString(t)&&(this.targetId=t),this.$element=e,this.offset=n};return n.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)),this.target},n.prototype.getTargetPosition=function(){var t=this.getTargetElement();return t?t.getBoundingClientRect():void 0},n.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(r,o,l){var i,c=l.ngHref||l.href;c&&-1!==c.indexOf("#")?i=c.replace(/.*(?=#[^\s]+$)/,"").substring(1):l.duScrollspy&&(i=l.duScrollspy),i&&e(function(){var e=new n(i,o,-(l.offset?parseInt(l.offset,10):0));t.addSpy(e),r.$on("$destroy",function(){t.removeSpy(e)}),r.$on("$locationChangeSuccess",e.flushTargetCache.bind(e)),r.$on("$stateChangeSuccess",e.flushTargetCache.bind(e))},0)}}}]);